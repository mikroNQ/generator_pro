<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>Generator ET</title>
    <style>
        :root{--primary:#3b82f6;--success:#10b981;--warning:#f59e0b;--danger:#ef4444;--gray:#6b7280;--light:#f3f4f6;--border:#d1d5db;--purple:#8b5cf6;--dark:#1f2937}
        *{box-sizing:border-box;-webkit-tap-highlight-color:transparent}
        body{margin:0;padding:15px;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;background:linear-gradient(135deg,#f5f5f5,#e8e0d5);min-height:100vh;font-size:14px}
        .container{max-width:550px;margin:0 auto}
        .card{background:#fff;border-radius:20px;box-shadow:0 4px 20px rgba(0,0,0,.08);padding:20px;margin-bottom:15px}
        .app-header{display:flex;align-items:center;justify-content:center;gap:10px;margin-bottom:20px}
        .app-logo{width:36px;height:36px;object-fit:contain}
        h1{color:#333;font-size:1.4em;margin:0;font-weight:800}
        .version-badge{font-size:.5em;background:var(--primary);color:#fff;padding:2px 6px;border-radius:8px;margin-left:8px;vertical-align:middle}
        .tabs{display:flex;flex-wrap:wrap;background:var(--light);border-radius:14px;padding:4px;margin-bottom:20px;gap:4px}
        .tab-btn{flex:1;padding:10px 8px;border:none;background:transparent;cursor:pointer;font-size:.85em;font-weight:500;color:var(--gray);border-radius:10px;white-space:nowrap}
        .tab-btn.active{background:#fff;color:#333;box-shadow:0 2px 8px rgba(0,0,0,.08);font-weight:600}
        .tab-content{display:none}
        .tab-content.active{display:block}
        .form-group{margin-bottom:15px}
        .form-group label{display:block;font-size:.9em;font-weight:600;color:#4b5563;margin-bottom:8px}
        input[type=text],input[type=number],select,textarea{width:100%;padding:12px;border:1px solid var(--border);border-radius:12px;font-size:16px;background:#fff}
        input:focus,select:focus,textarea:focus{outline:none;border-color:var(--primary);box-shadow:0 0 0 3px rgba(59,130,246,.15)}
        textarea{font-family:monospace;min-height:80px;resize:vertical}
        .btn{border:none;border-radius:20px;padding:12px 24px;font-size:.95em;font-weight:600;cursor:pointer;display:inline-flex;align-items:center;justify-content:center;gap:8px}
        .btn:active{transform:scale(.96);opacity:.9}
        .btn-primary{background:linear-gradient(145deg,var(--primary),#2563eb);color:#fff}
        .btn-success{background:linear-gradient(145deg,var(--success),#059669);color:#fff}
        .btn-warning{background:linear-gradient(145deg,var(--warning),#d97706);color:#fff}
        .btn-danger{background:var(--danger);color:#fff}
        .btn-purple{background:linear-gradient(145deg,var(--purple),#7c3aed);color:#fff}
        .btn-dark{background:var(--dark);color:#fff}
        .btn-outline{background:#fff;border:2px solid #e5e7eb;color:var(--gray)}
        .btn-secondary{background:var(--gray);color:#fff}
        .btn-sm{padding:8px 14px;font-size:.85em;border-radius:14px}
        
        .dm-play-controls .btn { min-width: 90px; }
        #start-btn, #stop-btn { min-width: 120px; }

        .add-form,.barcode-form,.weight-carousel-form,.simple-gen-form{background:var(--light);border-radius:16px;padding:18px;margin-bottom:15px}
        #code-container{background:var(--light);border-radius:12px;padding:15px;text-align:center;border:1px dashed var(--border);max-width:250px;margin:0 auto}
        #datamatrix-container{width:100%;aspect-ratio:1;display:flex;align-items:center;justify-content:center;background:#fff;border-radius:12px}
        #datamatrix-container canvas{width:90%!important;height:90%!important;object-fit:contain}
        .mode-badge{display:inline-block;padding:6px 12px;border-radius:12px;font-size:.75em;font-weight:600;margin-bottom:12px}
        .mode-badge.default{display:none}
        .mode-badge.list{background:#fef3c7;color:#92400e}
        .code-info{background:#e0f2fe;border-radius:10px;padding:12px;margin:12px 0;font-size:.85em}
        .code-info .label{color:#0369a1;font-weight:500}
        .code-info .value{font-family:monospace;color:#0c4a6e;font-weight:700}
        #current-code{font-family:monospace;font-size:12px;background:#333;color:#fff;padding:10px;border-radius:8px;word-break:break-all;text-align:center;margin:12px 0;max-height:60px;overflow-y:auto}
        .dm-visual-row{display:flex;align-items:center;justify-content:center;gap:15px;margin:15px 0}
        
        .dm-nav-arrow{
            background: transparent;
            border: none;
            width: 44px;
            height: 44px;
            font-size: 1.5em;
            color: var(--primary);
            cursor: pointer;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0;
            line-height: 1;
            padding-bottom: 3px;
        }
        .dm-nav-arrow:active{background:#d1d5db}
        
        .dm-carousel-controls{margin-top:15px;text-align:center}
        .dm-play-controls{display:flex;gap:8px;justify-content:center;margin-top:10px}
        .interval-selector{display:flex;align-items:center;justify-content:center;gap:8px;margin:15px auto;flex-wrap:wrap;background:#fff;padding:8px;border-radius:14px;border:1px solid var(--border)}
        .interval-btn,.wc-interval-btn{padding:8px 14px;border:none;background:transparent;border-radius:10px;font-size:.9em;cursor:pointer;color:var(--gray);font-weight:500}
        .interval-btn.active,.wc-interval-btn.active{background:#dcfce7;color:#166534;font-weight:700}
        
        .custom-interval-input{
            width: 85px !important;
            padding: 4px 2px;
            border: 1px solid var(--border);
            border-radius: 8px;
            font-size: .9em;
            text-align: center;
            height: 36px;
            flex: 0 0 auto;
        }

        .hint{font-size:.8em;color:#6b7280;margin-top:4px}
        .empty-state{text-align:center;padding:20px;color:#9ca3af}
        .template-selector{margin:15px 0}
        .template-btns{display:flex;gap:10px}
        .tmpl-btn{flex:1;padding:12px;border:2px solid var(--border);background:#fff;border-radius:12px;cursor:pointer;text-align:center}
        .tmpl-btn.active{border-color:var(--success);background:#f0fdf4}
        .tmpl-btn .tmpl-name{font-weight:700;display:block;margin-bottom:4px}
        .bulk-actions{display:flex;gap:8px;flex-wrap:wrap;align-items:center;margin-bottom:12px;padding:12px;background:#fffbeb;border-radius:12px;border:1px solid #fcd34d}
        .rotation-controls{background:var(--light);border-radius:12px;padding:15px;margin:15px 0;text-align:center}
        .rotation-controls.active{background:#dcfce7;border:1px solid #86efac}
        .saved-list h3{font-size:1em;margin:20px 0 10px;display:flex;justify-content:space-between;align-items:center}
        #saved-list,.weight-items-list{max-height:35vh;overflow-y:auto;padding:5px;border:1px solid var(--border);border-radius:12px;background:#fff}
        .saved-item,.weight-item{background:#f9fafb;border-radius:10px;padding:12px;margin-bottom:8px;display:flex;align-items:center;gap:10px;border:1px solid transparent}
        .saved-item.active,.weight-item.active{background:#f0fdf4;border-color:#4ade80}
        .saved-item .info,.weight-item .info{flex:1;min-width:0}
        .saved-item .barcode,.weight-item .code{font-weight:700;font-family:monospace}
        .barcode-result{background:var(--light);border-radius:16px;padding:25px;margin-top:15px;text-align:center}
        .barcode-result .result-text{font-family:monospace;font-size:1.2em;background:#fff;padding:12px;border-radius:8px;margin-bottom:15px;border:1px dashed #d1d5db}
        .barcode-result svg{max-width:100%;height:auto;display:block;margin:0 auto;background:#fff;padding:10px;border-radius:8px}
        .checkbox-row{display:flex;align-items:center;gap:10px;margin:15px 0;cursor:pointer}
        .checkbox-row input[type=checkbox]{width:22px;height:22px;accent-color:var(--primary)}
        .simple-preview{min-height:140px;display:flex;align-items:center;justify-content:center;background:#fff;border:2px dashed #d1d5db;border-radius:12px;margin-top:15px;padding:15px;position:relative}
        .sg-save-panel{background:#eff6ff;border:1px solid #bfdbfe;border-radius:12px;padding:18px;margin-top:15px}
        .folders-section{background:#fff7ed;border:1px solid #fed7aa;border-radius:12px;padding:15px;margin-bottom:15px}
        .sg-folder-row{display:flex;align-items:center;padding:12px;background:#fff;border:1px solid #e5e7eb;border-radius:10px;margin-bottom:8px;cursor:pointer}
        .sg-folder-row:active{transform:scale(.98)}
        .sg-carousel{display:flex;align-items:center;justify-content:space-between;background:#fff;border:2px solid var(--primary);border-radius:16px;padding:15px;margin-top:15px;gap:5px}
        .sg-arrow-btn{background:var(--light);border:1px solid var(--border);border-radius:50%;width:48px;height:48px;font-size:1.4em;display:flex;align-items:center;justify-content:center;cursor:pointer;color:var(--primary)}
        .sg-display-area{flex:1;text-align:center;min-height:160px;display:flex;flex-direction:column;align-items:center;justify-content:center}
        .sg-item-name{font-weight:700;color:#333;margin-bottom:8px;font-size:1.2em}
        .sg-item-counter{font-size:.85em;color:#888;margin-top:8px}
        .sg-back-btn{margin-bottom:15px;display:inline-flex;align-items:center;gap:6px;cursor:pointer;color:var(--primary);font-weight:600;padding:10px}
        .weight-divider{margin:25px 0;border:0;border-top:1px solid #e5e7eb}
        .weight-mode-switch{display:flex;gap:10px;margin-bottom:15px}
        .weight-mode-label{flex:1;text-align:center;padding:14px;font-size:.9em;font-weight:600;cursor:pointer;border-radius:12px;color:#555;background:#e5e7eb;border:2px solid transparent;display:flex;align-items:center;justify-content:center;gap:6px}
        .weight-mode-switch input[type=radio]{display:none}
        .weight-mode-switch input[type=radio]:checked+.weight-mode-label{background:#fff;color:var(--purple);border-color:var(--purple)}
        .weight-range-row{display:flex;gap:10px;align-items:center}
        .weight-range-row input{flex:1}
        .prefix-checkboxes{display:flex;gap:8px;margin-bottom:15px;flex-wrap:wrap}
        .prefix-checkbox{flex:1;display:flex;align-items:center;gap:8px;padding:12px;border:1px solid var(--border);background:#fff;border-radius:12px;cursor:pointer;min-width:90px}
        .prefix-checkbox:has(input:checked){border-color:var(--purple);background:#f3e8ff}
        .discount-section{background:#fdf4ff;border:1px dashed var(--purple);padding:15px;border-radius:12px;margin-bottom:15px}
        .folder-list{max-height:200px;overflow-y:auto;margin-bottom:12px}
        .folder-item{background:#fff;border-radius:10px;padding:12px;margin-bottom:8px;display:flex;align-items:center;gap:12px;border:1px solid var(--border);cursor:pointer}
        .folder-item.selected{border-color:var(--purple);background:#f3e8ff}
        .current-folder-badge{display:inline-block;background:var(--purple);color:#fff;padding:4px 10px;border-radius:12px;font-size:.8em;margin-left:8px;font-weight:600}
        
        /* FIX: –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –±–ª–æ–∫ –∫–∞—Ä—É—Å–µ–ª–∏ –±–∞—Ä–∫–æ–¥–æ–≤ */
        .barcode-carousel-display{
            background:#fff;
            border-radius:20px;
            padding:20px 10px;
            margin:20px 0;
            text-align:center;
            border:2px solid var(--purple);
            overflow:hidden;
        }
        .barcode-carousel-display svg{
            max-width:100%;
            height:auto;
            display:block;
            margin:0 auto;
        }
        
        .backup-section{background:#f3f4f6;border:1px dashed #9ca3af;border-radius:12px;padding:15px;margin-top:25px;text-align:center}
        .backup-title{font-size:.9em;font-weight:700;color:#4b5563;margin-bottom:10px}
        .backup-actions{display:flex;gap:10px;justify-content:center;flex-wrap:wrap}
        .history-panel{background:#fefce8;border:1px solid #fde047;border-radius:12px;padding:15px;margin-top:20px}
        .history-panel h4{margin:0 0 10px;color:#854d0e;font-size:.9em;display:flex;justify-content:space-between;align-items:center}
        .history-list{max-height:150px;overflow-y:auto}
        .history-item{display:flex;gap:8px;padding:8px;background:#fff;border-radius:8px;margin-bottom:6px;font-size:.75em;cursor:pointer}
        .history-item:hover{background:#fef9c3}
        .history-time{color:#a16207;min-width:50px}
        .history-type{color:#65a30d;font-weight:600;min-width:40px}
        .history-code{color:#333;font-family:monospace;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;flex:1}
        .input-group{display:flex;gap:8px}
        .input-group>*{height:48px}
        .d-none{display:none!important}
        .form-row{display:flex;gap:8px;flex-wrap:wrap}
        .controls{text-align:center;margin-top:20px}
        
        @keyframes pulse{0%,100%{opacity:1}50%{opacity:.5}}
        .pulse{animation:pulse 1.5s infinite}
        
        /* FIX: –ó–∞–º–µ–¥–ª–µ–Ω–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è –≤—Å–ø—ã—à–∫–∏ (0.5s –≤–º–µ—Å—Ç–æ 0.3s) */
        .flash{animation:flash .5s ease-out}
        @keyframes flash{0%{opacity:0;transform:scale(0.95)}100%{opacity:1;transform:scale(1)}}
    </style>
</head>
<body>
<div class="container">
<div class="card">
    <div class="app-header">
        <img src="logo.png" alt="Logo" class="app-logo">
        <h1>Generator ET</h1>
    </div>
    
    <div class="tabs">
        <button class="tab-btn active" data-tab="datamatrix">üì± DM</button>
        <button class="tab-btn" data-tab="library">üìö –ë–∏–±–ª.</button>
        <button class="tab-btn" data-tab="barcode">üè∑Ô∏è –í–µ—Å</button>
        <button class="tab-btn" data-tab="simplegen">üõ†Ô∏è –ö–æ–Ω—Å—Ç—Ä.</button>
        <button class="tab-btn" data-tab="weightcarousel">‚öñÔ∏è –ö–∞—Ä—É—Å–µ–ª—å</button>
    </div>
    
    <div id="tab-datamatrix" class="tab-content active">
        <div id="mode-indicator"><span class="mode-badge default" id="mode-badge">üì¶ –î–µ–º–æ</span></div>
        <div class="dm-visual-row">
            <button id="dm-prev-btn" class="dm-nav-arrow" style="display:none">‚ùÆ</button>
            <div id="code-container"><div id="datamatrix-container"></div></div>
            <button id="dm-next-btn" class="dm-nav-arrow" style="display:none">‚ùØ</button>
        </div>
        <div class="code-info" id="code-info" style="display:none">
            <div><span class="label">GTIN:</span> <span class="value" id="info-barcode">-</span></div>
            <div><span class="label">–®–∞–±–ª–æ–Ω:</span> <span class="value" id="info-template">-</span></div>
            <div class="counter" id="info-counter">1/1</div>
        </div>
        <div id="current-code">-</div>
        <div class="dm-carousel-controls">
            <div class="interval-selector">
                <button class="interval-btn" data-interval="0.5">0.5</button>
                <button class="interval-btn active" data-interval="0.7">0.7</button>
                <button class="interval-btn" data-interval="1">1</button>
                <button class="interval-btn" data-interval="2">2</button>
                <input type="number" id="dm-custom-interval" class="custom-interval-input" step="0.1" min="0.1" value="0.7">
            </div>
            <div id="timer" style="text-align:center;margin:10px 0">‚è±Ô∏è <span class="pulse" id="countdown">–ó–∞–≥—Ä—É–∑–∫–∞...</span></div>
            <div class="dm-play-controls">
                <button class="btn btn-warning btn-sm" id="dm-pause-btn">‚è∏ –°—Ç–æ–ø</button>
                <button class="btn btn-success btn-sm" id="dm-play-btn" style="display:none">‚ñ∂ –°—Ç–∞—Ä—Ç</button>
                <button class="btn btn-primary btn-sm" id="refresh-btn">‚ú® –û–±–Ω–æ–≤–∏—Ç—å</button>
            </div>
        </div>
    </div>
    
    <div id="tab-library" class="tab-content">
        <div class="add-form">
            <label>–î–æ–±–∞–≤–∏—Ç—å GTIN:</label>
            <textarea id="barcode-input" placeholder="–ë–∞—Ä–∫–æ–¥—ã (–∫–∞–∂–¥—ã–π —Å –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏)"></textarea>
            <div class="hint">üí° EAN-13 ‚Üí DataMatrix –ø–æ —à–∞–±–ª–æ–Ω—É</div>
            <div class="template-selector">
                <label>–®–∞–±–ª–æ–Ω:</label>
                <div class="template-btns">
                    <div class="tmpl-btn active" data-template="type1"><span class="tmpl-name">üì¶ –¢–∏–ø 1</span><span style="font-size:.8em;color:#666">–¢–∞–±–∞–∫/–í–æ–¥–∞</span></div>
                    <div class="tmpl-btn" data-template="type2"><span class="tmpl-name">üîê –¢–∏–ø 2</span><span style="font-size:.8em;color:#666">–û–±—É–≤—å/–û–¥–µ–∂–¥–∞</span></div>
                </div>
            </div>
            <div class="form-row">
                <button class="btn btn-success btn-sm" id="add-btn">‚ûï –î–æ–±–∞–≤–∏—Ç—å</button>
                <button class="btn btn-secondary btn-sm" id="clear-input-btn">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å</button>
            </div>
        </div>
        <div class="bulk-actions">
            <span style="flex:1;font-size:.85em;color:#92400e">–í—ã–±—Ä–∞–Ω–æ: <strong id="selected-count">0</strong></span>
            <button class="btn btn-outline btn-sm" id="select-all-btn">‚úì –í—Å–µ</button>
            <button class="btn btn-outline btn-sm" id="deselect-all-btn">‚úï –°–Ω—è—Ç—å</button>
        </div>
        <div class="rotation-controls" id="rotation-controls">
            <div id="rotation-status">–í—ã–±–µ—Ä–∏—Ç–µ GTIN –¥–ª—è —Ä–æ—Ç–∞—Ü–∏–∏</div>
            <div style="margin-top:10px;display:flex;justify-content:center;gap:10px">
                <button class="btn btn-success btn-sm" id="start-btn">‚ñ∂Ô∏è –ó–∞–ø—É—Å—Ç–∏—Ç—å</button>
                <button class="btn btn-warning btn-sm" id="stop-btn" style="display:none">‚èπÔ∏è –°—Ç–æ–ø</button>
            </div>
        </div>
        <div class="saved-list">
            <h3><span>üíæ –°–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ</span><button class="btn btn-danger btn-sm" id="clear-all-btn">–û—á–∏—Å—Ç–∏—Ç—å</button></h3>
            <div id="saved-list"></div>
        </div>
        <div class="backup-section">
            <div class="backup-title">üõ†Ô∏è –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ</div>
            <div class="backup-actions">
                <button class="btn btn-primary btn-sm" id="exportDataBtn">‚¨áÔ∏è –°–∫–∞—á–∞—Ç—å</button>
                <button class="btn btn-dark btn-sm" id="importDataBtn">‚¨ÜÔ∏è –ó–∞–≥—Ä—É–∑–∏—Ç—å</button>
                <input type="file" id="importFile" accept=".json" style="display:none">
            </div>
        </div>
        <div class="history-panel">
            <h4><span>üìú –ò—Å—Ç–æ—Ä–∏—è (50)</span><button class="btn btn-outline btn-sm" id="clearHistoryBtn" style="padding:4px 8px;font-size:.7em">–û—á–∏—Å—Ç–∏—Ç—å</button></h4>
            <div class="history-list" id="historyList"></div>
        </div>
    </div>
    
    <div id="tab-barcode" class="tab-content">
        <div class="barcode-form">
            <div class="form-group">
                <label>–¢–∏–ø —à—Ç—Ä–∏—Ö–∫–æ–¥–∞</label>
                <select id="barcodeType">
                    <option value="code128_19_piece">47-Code128: —à—Ç—É—á–Ω—ã–π (19)</option>
                    <option value="code128_19_weight">49-Code128: –≤–µ—Å–æ–≤–æ–π (19)</option>
                    <option value="code128_19_price">44-Code128: —Å —Ü–µ–Ω–æ–π (19)</option>
                    <option value="code128_16_cas">77-Code128: CAS (16)</option>
                    <option value="ean13_weight">22-EAN-13: –≤–µ—Å–æ–≤–æ–π (13)</option>
                </select>
            </div>
            <div id="barcodeParams"></div>
            <label class="checkbox-row"><input type="checkbox" id="simulateError"><span>–°–∏–º—É–ª—è—Ü–∏—è –æ—à–∏–±–∫–∏ CRC</span></label>
            <div class="controls"><button class="btn btn-primary" id="generateBarcodeBtn">üè∑Ô∏è –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å</button></div>
        </div>
        <div class="barcode-result" id="barcodeResult" style="display:none">
            <div class="result-text" id="barcodeText">-</div>
            <svg id="barcodeSvg"></svg>
        </div>
    </div>

    <div id="tab-simplegen" class="tab-content">
        <div id="sg-view-list">
            <div class="simple-gen-form">
                <div class="form-group">
                    <label>–¢–∏–ø</label>
                    <select id="sgType"><option value="CODE128">Code 128</option><option value="EAN13">EAN-13</option><option value="UPC">UPC</option><option value="ITF14">ITF-14</option></select>
                </div>
                <div class="form-group"><input type="text" id="sgValue" placeholder="–ó–Ω–∞—á–µ–Ω–∏–µ" autocomplete="off"></div>
                <div class="simple-preview"><span style="color:#999;font-size:.8em;position:absolute;top:5px;left:10px">–ü—Ä–µ–≤—å—é</span><svg id="sgSvg" style="display:none"></svg></div>
                <div class="sg-save-panel">
                    <label style="font-weight:700;color:#1e40af">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –ø–∞–ø–∫—É</label>
                    <div class="form-group" style="margin-top:10px">
                        <div class="input-group">
                            <select id="sgFolderSelect" style="flex:1"></select>
                            <input type="text" id="sgFolderInput" class="d-none" style="flex:1" placeholder="–ò–º—è –Ω–æ–≤–æ–π –ø–∞–ø–∫–∏">
                            <button class="btn btn-purple btn-sm" id="sgFolderModeBtn" style="min-width:50px;font-size:1.4em;padding:0">Ôºã</button>
                        </div>
                    </div>
                    <div class="form-group"><input type="text" id="sgName" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ"></div>
                    <button class="btn btn-success" style="width:100%" id="sgAddBtn">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                </div>
            </div>
            <div class="folders-section" style="background:#e0f2fe;border-color:#bfdbfe">
                <h4 style="color:#1e3a8a;margin:0 0 10px">üìÇ –ú–æ–∏ –ø–∞–ø–∫–∏</h4>
                <div id="sgFoldersList"></div>
            </div>
        </div>
        <div id="sg-view-carousel" style="display:none">
            <div class="sg-back-btn" id="sgBackBtn">‚Üê –ù–∞–∑–∞–¥</div>
            <h3 id="sgActiveFolderName" style="text-align:center;margin:0 0 15px">–ü–∞–ø–∫–∞</h3>
            <div class="sg-carousel">
                <div class="sg-arrow-btn" id="sgPrevBtn">‚ùÆ</div>
                <div class="sg-display-area">
                    <div class="sg-item-name" id="sgCarouselName">-</div>
                    <svg id="sgCarouselSvg"></svg>
                    <div class="sg-item-counter" id="sgCarouselCounter">0/0</div>
                </div>
                <div class="sg-arrow-btn" id="sgNextBtn">‚ùØ</div>
            </div>
            <div style="margin-top:20px;display:flex;justify-content:center;gap:10px">
                <button class="btn btn-warning btn-sm" id="sgRenameFolderBtn">‚úèÔ∏è –ü–µ—Ä–µ–∏–º.</button>
                <button class="btn btn-danger btn-sm" id="sgDeleteFolderBtn">üóëÔ∏è –£–¥. –ø–∞–ø–∫—É</button>
            </div>
            <div style="text-align:center;margin-top:10px"><button class="btn btn-outline btn-sm" id="sgDeleteItemBtn" style="color:#ef4444;border-color:#ef4444">‚ùå –£–¥–∞–ª–∏—Ç—å</button></div>
        </div>
    </div>
    
    <div id="tab-weightcarousel" class="tab-content">
        <div class="folders-section">
            <h4>üìÅ –ü–∞–ø–∫–∏ (–í–µ—Å–æ–≤—ã–µ)</h4>
            <div class="folder-list" id="wcFolderList"></div>
            <div style="display:flex;gap:8px;justify-content:center;margin-top:10px">
                <button class="btn btn-purple btn-sm" id="wc-run-folder">‚ñ∂Ô∏è –ó–∞–ø—É—Å–∫</button>
                <button class="btn btn-warning btn-sm" id="wc-rename-folder">‚úèÔ∏è</button>
                <button class="btn btn-danger btn-sm" id="wc-delete-folder">üóëÔ∏è</button>
            </div>
        </div>
        <div class="weight-carousel-form">
            <div class="form-group"><label>–ù–∞–∑–≤–∞–Ω–∏–µ –ø–∞–ø–∫–∏</label><input type="text" id="wcFolderName" placeholder="–°—ã—Ä—ã, –ö–æ–ª–±–∞—Å—ã..."></div>
            <label style="font-size:.85em;font-weight:600">–ü—Ä–µ—Ñ–∏–∫—Å—ã:</label>
            <div class="prefix-checkboxes">
                <label class="prefix-checkbox"><input type="checkbox" id="wcPrefix77" checked><span>77 CAS</span></label>
                <label class="prefix-checkbox"><input type="checkbox" id="wcPrefix22"><span>22 EAN</span></label>
                <label class="prefix-checkbox"><input type="checkbox" id="wcPrefix49"><span>49 C128</span></label>
            </div>
            <div class="form-group"><label>PLU –∫–æ–¥—ã</label><textarea id="wcProductCode" placeholder="1234" style="height:70px"></textarea></div>
            <div id="group-discount-section" class="discount-section d-none">
                <label style="font-weight:700;color:#7c3aed">üè∑Ô∏è –°–∫–∏–¥–∫–∞ (49)</label>
                <div class="weight-mode-switch" style="margin-top:8px">
                    <input type="radio" name="discountMode" id="discFixed" value="fixed" checked><label class="weight-mode-label" for="discFixed">üîí –§–∏–∫—Å.</label>
                    <input type="radio" name="discountMode" id="discRandom" value="random"><label class="weight-mode-label" for="discRandom">üé≤ Rand</label>
                </div>
                <div id="disc-fixed-group"><input type="number" id="wcDiscount" value="0" min="0" max="99"><div class="hint">%</div></div>
                <div id="disc-random-group" class="d-none"><div class="weight-range-row"><input type="number" id="wcDiscMin" value="5"><span>‚Äî</span><input type="number" id="wcDiscMax" value="30"></div></div>
            </div>
            <hr class="weight-divider">
            <label style="font-weight:700">–í–µ—Å:</label>
            <div class="weight-mode-switch">
                <input type="radio" name="weightMode" id="weightRandom" value="random" checked><label class="weight-mode-label" for="weightRandom">üé≤ Random</label>
                <input type="radio" name="weightMode" id="weightFixed" value="fixed"><label class="weight-mode-label" for="weightFixed">‚öì –§–∏–∫—Å.</label>
            </div>
            <div class="form-group" id="group-random-weight"><label>–î–∏–∞–ø–∞–∑–æ–Ω (–≥)</label><div class="weight-range-row"><input type="number" id="wcWeightMin" value="150"><span>‚Äî</span><input type="number" id="wcWeightMax" value="8000"></div></div>
            <div class="form-group d-none" id="group-fixed-weight"><label>–§–∏–∫—Å. –≤–µ—Å (–≥)</label><input type="number" id="wcFixedWeight" value="500"></div>
            <div class="form-group"><label id="wcVariationsLabel">–í–∞—Ä–∏–∞—Ü–∏–π</label><input type="number" id="wcVariations" value="10" min="1" max="100"><div class="hint" id="wcVariationsHint">–í–µ—Å–æ–≤ –Ω–∞ PLU</div></div>
            <div class="controls"><button class="btn btn-purple" id="wcAddToCarousel">‚ûï –î–æ–±–∞–≤–∏—Ç—å</button></div>
        </div>
        <div class="bulk-actions">
            <span style="flex:1;font-size:.8em">–í –ø–∞–ø–∫–µ: <strong id="wc-items-count">0</strong> <span id="wc-current-folder-name"></span></span>
            <button class="btn btn-outline btn-sm" id="wc-select-all">‚úì</button>
            <button class="btn btn-outline btn-sm" id="wc-deselect-all">‚úï</button>
            <button class="btn btn-danger btn-sm" id="wc-clear-selected">üóëÔ∏è</button>
        </div>
        <div class="weight-items-list" id="wcItemsList"></div>
        <div class="rotation-controls" id="wc-rotation-controls">
            <div id="wc-rotation-status">–°–æ–∑–¥–∞–π—Ç–µ –ø–∞–ø–∫—É</div>
            <div style="margin-top:10px;display:flex;justify-content:center;gap:10px">
                <button class="btn btn-success btn-sm" id="wc-start-btn">‚ñ∂Ô∏è –°—Ç–∞—Ä—Ç</button>
                <button class="btn btn-warning btn-sm" id="wc-stop-btn" style="display:none">‚èπÔ∏è –°—Ç–æ–ø</button>
            </div>
        </div>
        <div class="barcode-carousel-display" id="wcCarouselDisplay" style="display:none">
            <div id="wcBarcodeInfo">-</div>
            <div id="wcBarcodeText" style="font-family:monospace;margin:10px 0">-</div>
            <svg id="wcBarcodeSvg"></svg>
            <div id="wcCarouselCounter" style="margin-top:10px;color:#888">1/1</div>
        </div>
        <div class="interval-selector">
            <span style="font-size:.8em;color:#666">‚è±Ô∏è</span>
            <button class="wc-interval-btn" data-interval="0.5">0.5</button>
            <button class="wc-interval-btn active" data-interval="0.7">0.7</button>
            <button class="wc-interval-btn" data-interval="1">1</button>
            <button class="wc-interval-btn" data-interval="2">2</button>
            <input type="number" id="wc-custom-interval" class="custom-interval-input" step="0.1" min="0.1" value="0.7">
        </div>
    </div>
</div>
</div>

<script src="https://unpkg.com/bwip-js@3.0.4/dist/bwip-js-min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.5/dist/JsBarcode.all.min.js"></script>
<script src="app.js"></script>
</body>
</html>
